from typing import Dict, Any
from config import LANGUAGE

# Define translations for all UI text
TRANSLATIONS: Dict[str, Dict[str, str]] = {
    # Main menu buttons
    "view_recipe_button": {
        "en": "üìñ View Recipe",
        "ru": "üìñ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—Ü–µ–ø—Ç"
    },
    "add_recipe_button": {
        "en": "‚ûï Add Recipe",
        "ru": "‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç"
    },
    "ask_ai_button": {
        "en": "ü§ñ Ask AI",
        "ru": "ü§ñ –°–ø—Ä–æ—Å–∏—Ç—å –ò–ò"
    },
    "cancel_button": {
        "en": "‚ùå Cancel",
        "ru": "‚ùå –û—Ç–º–µ–Ω–∞"
    },
    
    # Navigation buttons
    "back_button": {
        "en": "‚¨ÖÔ∏è Back",
        "ru": "‚¨ÖÔ∏è –ù–∞–∑–∞–¥"
    },
    "next_button": {
        "en": "‚û°Ô∏è Next",
        "ru": "‚û°Ô∏è –í–ø–µ—Ä–µ–¥"
    },
    "back_to_categories_button": {
        "en": "üîô Back to Categories",
        "ru": "üîô –ö –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"
    },
    "back_to_list_button": {
        "en": "üîô Back to List",
        "ru": "üîô –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"
    },
    "edit_button": {
        "en": "‚úèÔ∏è Edit",
        "ru": "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
    },
    "delete_button": {
        "en": "üóëÔ∏è Delete",
        "ru": "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å"
    },
    "back_to_recipe_list_button": {
        "en": "üîô Back to Recipe List",
        "ru": "üîô –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —Ä–µ—Ü–µ–ø—Ç–æ–≤"
    },
    
    # Confirmation buttons
    "yes_button": {
        "en": "‚úÖ Yes",
        "ru": "‚úÖ –î–∞"
    },
    "no_button": {
        "en": "‚ùå No",
        "ru": "‚ùå –ù–µ—Ç"
    },
    
    # Messages
    "select_category": {
        "en": "Select a recipe category:",
        "ru": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ä–µ—Ü–µ–ø—Ç–æ–≤:"
    },
    "select_category_for_new": {
        "en": "Select a category for the new recipe:",
        "ru": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞:"
    },
    "select_category_for_edit": {
        "en": "Select a category for the recipe:",
        "ru": "–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è —Ä–µ—Ü–µ–ø—Ç–∞:"
    },
    "cancel_anytime": {
        "en": "You can cancel adding a recipe at any time.",
        "ru": "–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç."
    },
    "cancel_edit_anytime": {
        "en": "You can cancel editing a recipe at any time.",
        "ru": "–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç."
    },
    "ask_ai_prompt": {
        "en": "Ask a question about cooking or describe ingredients you have, and I'll suggest what you can cook.",
        "ru": "–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ –∫—É–ª–∏–Ω–∞—Ä–∏–∏ –∏–ª–∏ –æ–ø–∏—à–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É –≤–∞—Å –µ—Å—Ç—å, –∏ —è –ø–æ–¥—Å–∫–∞–∂—É, —á—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å."
    },
    "action_cancelled": {
        "en": "Action cancelled. What would you like to do?",
        "ru": "–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ. –ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ —Å–¥–µ–ª–∞—Ç—å?"
    },
    "invalid_category": {
        "en": "Invalid category selection",
        "ru": "–ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"
    },
    "no_recipes_in_category": {
        "en": "There are no recipes in the '{category}' category yet.",
        "ru": "–í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '{category}' –ø–æ–∫–∞ –Ω–µ—Ç —Ä–µ—Ü–µ–ø—Ç–æ–≤."
    },
    "recipes_in_category": {
        "en": "Recipes in '{category}' category:",
        "ru": "–†–µ—Ü–µ–ø—Ç—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '{category}':"
    },
    "page_number": {
        "en": "Page {page}",
        "ru": "–°—Ç—Ä–∞–Ω–∏—Ü–∞ {page}"
    },
    "back_to_categories": {
        "en": "Back to categories",
        "ru": "–í–æ–∑–≤—Ä–∞—Ç –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º"
    },
    "recipe_not_found": {
        "en": "Recipe not found.",
        "ru": "–†–µ—Ü–µ–ø—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω."
    },
    "view_recipe": {
        "en": "View recipe",
        "ru": "–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ—Ü–µ–ø—Ç–∞"
    },
    "back_to_recipe_list": {
        "en": "Back to recipe list for '{category}'",
        "ru": "–í–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ '{category}'"
    },
    "selected_category": {
        "en": "Selected category: {category}\n\nEnter recipe title:",
        "ru": "–í—ã–±—Ä–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è: {category}\n\n–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞:"
    },
    "enter_ingredients": {
        "en": "Enter ingredients (each on a new line):",
        "ru": "–í–≤–µ–¥–∏—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏):"
    },
    "enter_instructions": {
        "en": "Enter cooking instructions:",
        "ru": "–í–≤–µ–¥–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:"
    },
    "enter_video_link": {
        "en": "Enter video link (optional):\n\nIf there is no link, just send '-'.",
        "ru": "–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):\n\n–ï—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–µ—Ç, –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '-'."
    },
    "check_recipe": {
        "en": "Check the recipe before saving:\n\n{preview}\n\nSave the recipe?",
        "ru": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ—Ü–µ–ø—Ç –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:\n\n{preview}\n\n–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç?"
    },
    "recipe_saved": {
        "en": "‚úÖ Recipe successfully saved!",
        "ru": "‚úÖ –†–µ—Ü–µ–ø—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!"
    },
    "recipe_cancelled": {
        "en": "‚ùå Recipe addition cancelled.",
        "ru": "‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω–æ."
    },
    "what_next": {
        "en": "What would you like to do next?",
        "ru": "–ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ —Å–¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?"
    },
    "edit_title": {
        "en": "Edit recipe title:\n\nCurrent: {current}",
        "ru": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞:\n\n–¢–µ–∫—É—â–µ–µ: {current}"
    },
    "edit_title_short": {
        "en": "Edit title",
        "ru": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ"
    },
    "edit_ingredients": {
        "en": "Edit ingredients (each on a new line):\n\nCurrent:\n{current}",
        "ru": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã (–∫–∞–∂–¥—ã–π —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏):\n\n–¢–µ–∫—É—â–∏–µ:\n{current}"
    },
    "edit_instructions": {
        "en": "Edit cooking instructions:\n\nCurrent:\n{current}",
        "ru": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Å–æ–± –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:\n\n–¢–µ–∫—É—â–∏–π:\n{current}"
    },
    "edit_video_link": {
        "en": "Edit video link (optional):\n\nCurrent: {current}\n\nIf there is no link, just send '-'.",
        "ru": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):\n\n–¢–µ–∫—É—â–∞—è: {current}\n\n–ï—Å–ª–∏ —Å—Å—ã–ª–∫–∏ –Ω–µ—Ç, –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '-'."
    },
    "check_recipe_edit": {
        "en": "Check the edited recipe before saving:\n\n{preview}\n\nSave the changes?",
        "ru": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º:\n\n{preview}\n\n–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è?"
    },
    "recipe_updated": {
        "en": "‚úÖ Recipe successfully updated!",
        "ru": "‚úÖ –†–µ—Ü–µ–ø—Ç —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!"
    },
    "recipe_update_failed": {
        "en": "‚ùå Failed to update recipe.",
        "ru": "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç."
    },
    "recipe_edit_cancelled": {
        "en": "‚ùå Recipe editing cancelled.",
        "ru": "‚ùå –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω–æ."
    },
    "confirm_delete": {
        "en": "Are you sure you want to delete the recipe '{title}'?",
        "ru": "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç '{title}'?"
    },
    "confirm_delete_short": {
        "en": "Confirm deletion",
        "ru": "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ"
    },
    "recipe_deleted": {
        "en": "‚úÖ Recipe successfully deleted!",
        "ru": "‚úÖ –†–µ—Ü–µ–ø—Ç —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω!"
    },
    "recipe_delete_failed": {
        "en": "‚ùå Failed to delete recipe.",
        "ru": "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç."
    },
    "recipe_delete_cancelled": {
        "en": "‚ùå Recipe deletion cancelled.",
        "ru": "‚ùå –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –æ—Ç–º–µ–Ω–µ–Ω–æ."
    },
    "edit_recipe": {
        "en": "Edit recipe",
        "ru": "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç"
    },
    "thinking": {
        "en": "ü§ñ Thinking about the answer...",
        "ru": "ü§ñ –î—É–º–∞—é –Ω–∞–¥ –æ—Ç–≤–µ—Ç–æ–º..."
    },
    "ai_error": {
        "en": "Sorry, there was an error when contacting the AI. Please try again later.",
        "ru": "–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ò–ò. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
    },
    "response_truncated": {
        "en": "\n\n[The response was shortened due to message length limitations]",
        "ru": "\n\n[–û—Ç–≤–µ—Ç –±—ã–ª —Å–æ–∫—Ä–∞—â–µ–Ω –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–ª–∏–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è]"
    },
    "processing_error": {
        "en": "Sorry, there was an error processing your request. Please try again later.",
        "ru": "–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ."
    },
    # Recipe details
    "ingredients_label": {
        "en": "üßÇ Ingredients:",
        "ru": "üßÇ –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:"
    },
    "instructions_label": {
        "en": "üî• Cooking method:",
        "ru": "üî• –°–ø–æ—Å–æ–± –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:"
    },
    "video_label": {
        "en": "üé• Video:",
        "ru": "üé• –í–∏–¥–µ–æ:"
    },
    "category_label": {
        "en": "üìÇ Category:",
        "ru": "üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è:"
    },
    # Start message
    "welcome_message": {
        "en": "Hello, {name}!\n\nWelcome to Cooking Recipe Bot! üç≥\nHere you can view, add recipes and ask AI about cooking food",
        "ru": "–ü—Ä–∏–≤–µ—Ç, {name}!\n\n–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Cooking Recipe Bot! üç≥\n–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å —Å–º–æ—Ç—Ä–µ—Ç—å, –¥–æ–±–∞–≤–ª—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã –∏ —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å –ò–ò –ø—Ä–æ –≥–æ—Ç–æ–≤–∫—É –µ–¥—ã"
    },
    "choose_menu_item": {
        "en": "Choose a menu item:",
        "ru": "–í—ã–±–µ—Ä–∏ –ø—É–Ω–∫—Ç –º–µ–Ω—é:"
    }
}

# Helper function to get translation
def get_text(key: str, **kwargs) -> str:
    """Get translated text for the given key and format with kwargs if needed."""
    if key not in TRANSLATIONS:
        return f"Missing translation: {key}"
    
    text = TRANSLATIONS[key].get(LANGUAGE, TRANSLATIONS[key].get("en", f"Missing translation: {key}"))
    
    # Format the text with kwargs if provided
    if kwargs:
        try:
            return text.format(**kwargs)
        except KeyError as e:
            return f"Error formatting translation: {e}"
    
    return text